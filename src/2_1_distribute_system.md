> 모두가 X를 안다는 사실로는 충분하지 않습니다. 모두가 X를 안다는 사실도 모두가 알아야 하고요, 또 모두가 X를 안다는 사실을 우리 모두가 다 안다는 사실도 전원이 알아야 하지요. 이는 비잔틴 장군의 문제처럼, 분산 데이터 시스템에서 오래된 난제입니다.
>
> — 제임스.A.도널드, 사토시 나카모토와의 대화에서

# 분산 시스템
비트코인의 가장 혁신적인 부분은, 리더 없는 분산 시스템에서도 합의가 가능하다는 것을 기술적으로 입증했다는 점입니다. 이는 단순한 기술적 성취가 아닙니다. 수십 년간 컴퓨터 과학자들이 도달하지 못했던 벽을 비트코인이 뛰어넘었다는 뜻이기 때문입니다. 그렇다면, 분산 시스템과 합의란 무엇이고, 왜 그것이 난제로 여겨질까요?

분산 시스템이란, 물리적으로 분리된 여러 참가자들이 마치 하나의 시스템처럼 협력하도록 구성된 구조입니다. 각 참가자는 서로 통신하며, 동일한 상태를 유지하려 노력합니다. 이 시스템이 제대로 작동하려면, 각 참가자가 받은 정보가 신뢰할 수 있어야 하며, 그 정보에 대해 모두가 같은 판단을 내리도록 조율되어야 합니다.

중앙 관리자가 있는 경우, 이 문제는 단순합니다. 리더가 결정을 내리면, 나머지 참가자는 따르면 됩니다. 하지만 리더가 없다면? 누구의 판단을 따라야 할지, 어떤 기준으로 옳고 그름을 판단할지도 모르는 상황에서, 모든 참가자가 어떻게 하나의 결론에 이를 수 있을까요? 바로 이 질문이, 리더 없는 분산 시스템을 어렵게 만드는 핵심입니다.

## 리더 없는 분산 시스템의 어려움
1. 복잡성과 비효율성 : 리더가 없는 시스템에서는 모든 참가자가 동등한 역할을 수행하며, 합의를 이루기 위해 대다수 참가자 간의 긴밀한 협력과 통신이 필요합니다. 이로 인해 합의에 이르기까지의 메시지 전달 비용은 참가자 수의 증가에 따라 기하급수적으로 늘어나게 됩니다.

2. 결정 지연 : 모든 참가자가 동등하게 합의에 참여해야 하므로, 하나의 결정을 내리는 데 시간이 지연될 가능성이 높습니다. 특히 네트워크 지연이나 일부 참가자의 장애와 같은 단순한 문제조차 전체 합의 과정을 지연시키는 병목이 될 수 있습니다.

3. 내결함성(Fault Tolerance) : 일부 참가자에서 장애가 발생하거나 의도적으로 왜곡된 정보를 전달할 경우, 이를 감지하고 처리하는 작업은 매우 어렵습니다. 악의적인 정보를 퍼뜨리는 참가자와 단순히 느린 참가자를 구분할 방법이 없기 때문에, 정상적인 참가자조차 의심받을 수 있습니다.

## FLP Impossibility
이를 해결할 방법은 있을까요? 아쉽게도, 그에 대한 답은 '불가능하다'는 것이었습니다. FLP Impossibility 는 분산 시스템의 한계를 수학적으로 입증한 정리입니다. 이 정리에 따르면, 비동기 분산 시스템에서 완벽한 합의는 불가능합니다. 보다 정확히는, 다음 세 가지 조건을 동시에 만족할 수 없습니다.

1. Safety: 올바르게 동작하는 노드들 사이에서는, 어떤 경우에도 잘못된 합의가 발생해서는 안 된다.
2. Liveness: 언젠가는 반드시, 시스템이 합의에 도달해야 한다.
3. Fault Tolerance: 일부 노드가 고장 나거나 잘못된 정보를 보내더라도, 시스템은 멈추지 않고 작동해야 한다.

FLP Impossibility는 Safety와 Liveness를 동시에 만족하면서 Fault Tolerance를 보장하는 것이 불가능하다고 설명합니다. 즉, 단 한 개의 결함 있는 노드가 존재하더라도, 시스템은 안정성과 진행성 중 하나를 반드시 포기해야 합니다. 이를 잘 설명해주는 사례가 바로 다음 장에서 소개할 비잔틴 장군의 문제입니다.